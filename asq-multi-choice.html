<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../asq-option/asq-option.html">
<link rel="import" href="../asq-element-common/asq-element-common.html">

<polymer-element name="asq-multi-choice">
  <template>
    <style>
    </style>

    <!-- (for now) Keep same when either viewer or presenter -->
    <div class="asq-multi-choice">
      <content select="asq-stem"></content>
      <div id="choices">
        <ol>
          <content></content>
        </ol>
      </div>
    </div>
    
  </template>

  <script>
  (function() {
    var p = {

      submit: function() {
        if ( this.role !== this.Roles.VIEWER ) {
          return;
        }
        console.log(this.childNodes);
        var options = this.childNodes.array().filter(function(el) {
          return el.isASQElement && el.nodeName == "ASQ-OPTION";
        });

        console.log("options", options);
        var submisstion = [];
        options.forEach(function(elem, index) {
          submisstion.push(elem.submit());
        });   

        return {
          questionId: "",
          timestamp: new Date(),
          submisstion: submisstion
        };
      }

    }

    ASQ.mixin2(p, ASQ.RoleMixin);
    Polymer.mixin(p, ASQ.ElementTypeMixin, ASQ.QuestionTypeMixin);
    Polymer('asq-multi-choice', p);

  })();
  </script>
</polymer-element>